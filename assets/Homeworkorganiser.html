<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework Tracker & Planner</title>
    <style>
        /* Base styles */
        body { font-family: sans-serif; max-width: 600px; margin: 20px auto; padding: 0 10px; background: #fff; color: #333; transition: background 0.3s, color 0.3s; }
        .container { background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px; transition: background 0.3s; }
        h1, h2 { color: #333; transition: color 0.3s; }
        .form-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, button { width: 100%; padding: 8px; box-sizing: border-box; border-radius: 4px; border: 1px solid #ccc; background: #fff; color: #333; transition: background 0.3s, color 0.3s, border-color 0.3s; }
        button { background-color: #007bff; color: white; border: none; cursor: pointer; margin-top: 10px; }
        button:hover { background-color: #0056b3; }
        .task-list { list-style: none; padding: 0; }
        .task-item { background: white; margin-bottom: 10px; padding: 15px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; transition: background 0.3s, box-shadow 0.3s; }
        .task-details { flex-grow: 1; }
        .task-due-date { font-size: 0.8em; color: #666; transition: color 0.3s; }
        .task-priority-high { color: #dc3545; font-weight: bold; }
        .task-priority-medium { color: #ffc107; font-weight: bold; }
        .task-priority-low { color: #28a745; font-weight: bold; }
        .complete-btn { background-color: #28a745; width: auto; margin-top: 0; margin-left: 10px; padding: 5px 10px; }
        .complete-btn:hover { background-color: #218838; }
        .completed-task { text-decoration: line-through; opacity: 0.6; }
        
        /* Dark Theme Styles */
        body.dark-mode { background: #121212; color: #e0e0e0; }
        body.dark-mode h1, body.dark-mode h2 { color: #ffffff; }
        body.dark-mode .container { background: #1e1e1e; }
        body.dark-mode input, body.dark-mode select, body.dark-mode button:not(.complete-btn, .theme-toggle-label input + span) { 
            background: #333; 
            color: #e0e0e0; 
            border-color: #555; 
        }
        body.dark-mode .task-item { background: #2c2c2c; box-shadow: 0 1px 3px rgba(255,255,255,0.1); }
        body.dark-mode .task-due-date { color: #aaaaaa; }

        /* Theme Toggle Switch CSS */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        /* The switch - the box around the slider */
        .theme-toggle-label {
          position: relative;
          display: inline-block;
          width: 60px;
          height: 34px;
        }

        /* Hide default HTML checkbox */
        .theme-toggle-label input {
          opacity: 0;
          width: 0;
          height: 0;
        }

        /* The slider */
        .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          -webkit-transition: .4s;
          transition: .4s;
          border-radius: 34px;
        }

        .slider:before {
          position: absolute;
          content: "";
          height: 26px;
          width: 26px;
          left: 4px;
          bottom: 4px;
          background-color: white;
          -webkit-transition: .4s;
          transition: .4s;
          border-radius: 50%;
        }

        input:checked + .slider {
          background-color: #2196F3;
        }

        input:focus + .slider {
          box-shadow: 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
          -webkit-transform: translateX(26px);
          -ms-transform: translateX(26px);
          transform: translateX(26px);
        }
        
        /* CSS for printing: Hide elements not needed in the printout */
        @media print {
            .no-print {
                display: none !important;
            }
            body, body.dark-mode {
                /* Remove background colors and shadows for cleaner printing */
                background: white;
                box-shadow: none;
                color: black;
            }
            .container {
                background: white;
                padding: 0;
            }
            .task-item {
                box-shadow: none;
                border: 1px solid #ccc; /* Add a border to task items for definition */
            }
            body.dark-mode h1, body.dark-mode h2 {
                color: black;
            }
            .task-due-date {
                color: #666;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Switch HTML (added) -->
    <div class="theme-toggle no-print">
        <label class="theme-toggle-label" for="theme-switch" aria-label="Toggle dark mode">
            <input type="checkbox" id="theme-switch">
            <span class="slider"></span>
        </label>
    </div>
    
    <h1>Homework Tracker</h1>

    <!-- Add 'no-print' class to the 'Add Task' container -->
    <div class="container no-print">
        <h2>Add New Task</h2>
        <div class="form-group">
            <label for="taskName">Task Name:</label>
            <input type="text" id="taskName" required>
        </div>
        <div class="form-group">
            <label for="dueDate">Due Date:</label>
            <input type="date" id="dueDate" required>
        </div>
        <div class="form-group">
            <label for="priority">Priority:</label>
            <select id="priority">
                <option value="High">High</option>
                <option value="Medium" selected>Medium</option>
                <option value="Low">Low</option>
            </select>
        </div>
        <button onclick="addTask()">Add HW Task</button>
    </div>

    <div class="container">
        <h2>Upcoming Homework</h2>
        <!-- Add the print button with 'no-print' class to hide it in the printout itself -->
        <button onclick="window.print()" class="no-print">Print Planner (to PDF)</button>
        <ul id="taskList" class="task-list">
            <!-- Tasks will be dynamically added here -->
        </ul>
    </div>

    <script>
        // Theme Toggle Logic (added)
        const themeSwitch = document.getElementById('theme-switch');
        const body = document.body;

        function enableDarkMode() {
            body.classList.add('dark-mode');
            localStorage.setItem('darkMode', 'enabled');
            themeSwitch.checked = true;
        }

        function disableDarkMode() {
            body.classList.remove('dark-mode');
            localStorage.setItem('darkMode', 'disabled');
            themeSwitch.checked = false;
        }

        // Check user's preference on load
        if (localStorage.getItem('darkMode') === 'enabled') {
            enableDarkMode();
        }

        // Listen for toggle switch change
        themeSwitch.addEventListener('change', () => {
            if (themeSwitch.checked) {
                enableDarkMode();
            } else {
                disableDarkMode();
            }
        });

        // Existing homework tracker logic below
        const taskNameInput = document.getElementById('taskName');
        const dueDateInput = document.getElementById('dueDate');
        const priorityInput = document.getElementById('priority');
        const taskList = document.getElementById('taskList');
        let tasks = JSON.parse(localStorage.getItem('homeworkTasks')) || []; // Load data

        function saveTasks() {
            localStorage.setItem('homeworkTasks', JSON.stringify(tasks)); // Save data
        }
        
        // ... (rest of the JavaScript functions: renderTasks, addTask, toggleComplete remain the same) ...

        function renderTasks() {
            taskList.innerHTML = '';
            // Sort tasks by completion status, then by due date, then by priority
            tasks.sort((a, b) => {
                // Sort by completion status (incomplete first)
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                // Sort by due date (earliest first)
                const dateA = new Date(a.dueDate);
                const dateB = new Date(b.dueDate);
                if (dateA && dateB) {
                    return dateA - dateB;
                }
                // Sort by priority if dates are equal
                const priorityOrder = { 'High': 1, 'Medium': 2, 'Low': 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });

            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.classList.add('task-item');
                if (task.completed) {
                    li.classList.add('completed-task');
                }

                const taskDetails = document.createElement('div');
                taskDetails.classList.add('task-details');
                taskDetails.innerHTML = `
                    <strong>${task.name}</strong>
                    <span class="task-due-date"> (Due: ${new Date(task.dueDate).toLocaleDateString()})</span>
                    <div class="task-priority-${task.priority.toLowerCase()}">${task.priority} Priority</div>
                `;

                const completeBtn = document.createElement('button');
                completeBtn.classList.add('complete-btn');
                // Add 'no-print' class to the complete button
                completeBtn.classList.add('no-print'); 
                completeBtn.textContent = task.completed ? 'Undo' : 'Complete';
                completeBtn.onclick = () => toggleComplete(index);

                li.appendChild(taskDetails);
                li.appendChild(completeBtn);
                taskList.appendChild(li);
            });
        }

        function addTask() {
            const name = taskNameInput.value.trim();
            const dueDate = dueDateInput.value;
            const priority = priorityInput.value;

            if (name && dueDate) {
                tasks.push({ name, dueDate, priority, completed: false });
                saveTasks();
                renderTasks();
                // Clear form
                taskNameInput.value = '';
                dueDateInput.value = '';
                priorityInput.value = 'Medium';
            } else {
                alert('Please enter both a task name and a due date.');
            }
        }

        function toggleComplete(index) {
            tasks[index].completed = !tasks[index].completed;
            saveTasks();
            renderTasks();
        }

        // Initial render when the page loads
        renderTasks();
    </script>
</body>
</html>
